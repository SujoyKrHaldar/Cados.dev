import Head from "next/head";
import Advocates from "../../components/advocates/Advocates";
import Landing from "../../components/advocates/Landing";
import Layout from "../../components/layout/Layout";

export const getServerSideProps = async ({ query: { page = 1 } }) => {
  const res = await fetch(
    `https://cados.up.railway.app/advocates?page=${page}&limit=20`
  );
  const userData = await res.json();
  return {
    props: {
      pagination: userData.pagination,
      total: userData.total,
      data: userData.advocates,
    },
  };
};

function advocates({ total, data, pagination }) {
  return (
    <>
      <Head>
        <title>Discover peoples - Cados dev</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <Layout>
        <Landing number={total} />
        <Advocates data={data} number={total} pagination={pagination} />
      </Layout>
    </>
  );
}

export default advocates;
